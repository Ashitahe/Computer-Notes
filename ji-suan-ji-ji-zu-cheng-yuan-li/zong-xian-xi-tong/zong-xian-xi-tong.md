---

title: 计算机总线系统概述
date: 2021-06-14 21:34:31
categories: 计算机组成原理
tags:
- CS

sticky: 
pic:
comments: true
toc: true
only:
- home
- category
- tag

---
# 总线系统

## 基础概念

总线用于将计算机各个部件连接起来，成为一个整体，是多个系统功能部件之间进行数据传输的公共通道

单处理器系统中总线分为三大类

* 内部总线：CPU内部连接寄存器、运算部件
* 系统总线：计算机系统用于连接其它高速设备，存储器、通道等
* I/O总线：用于连接中、低速 I/O 设备

## 总线的特性

* 物理特性：指总线的物理连接方式，包括总线的根数，总线插头、引脚数等
* 功能特性：描述总线中每一根线的功能
* 电气特性：定义每根线上信号的传递方向以及有效的电平范围
* 时间特性：定义了每根线在何时有效

## 总线连接方式

通常采用适配器部件来完成

* 单总线系统：要总线上的所有逻辑部件都高速运行，以便某些设备需要使用总线时能迅速获得总线控制权
* 多总线系统：将高速设备（北桥）和低速设备（南桥）分开，用不同类型的桥扩展出不同层次的总线

## 总线内部结构

* 地址线：单向，用于传送主存与设备的地址
* 数据线：双向，用来传送数据
* 控制线：对每根线是单向（CPU发向接口，或接口发向CPU），用来指明数据传送的方向（存储器读写、I/O读写）、中断控制和定时控制等

## 总体总线分类

### 数据传送总线

由地址线、数据线、控制线组成

### 仲裁总线

包括总线请求线和总线授权线

### 中断和同步总线

用于处理带优先级的中断操作，包括中断请求线和中断认可线

### 公用线

包括时钟信号线、电源线、地线、系统复位线以及加电或断电的时序信号线

## 总线仲裁

### 集中式仲裁

* 链式查询

  菊花链式查询，授权信号串行地从一个接口发送到下一个接口，若中间有设备请求总线则获得授权，信号不再传递。离CPU越近的设备优先级越高

  该种方式优点是简单、节省线路；其缺点是优先级不能改变，不灵活，可能存在优先级低的设备饿死，对电路故障十分敏感，若中间设备故障则后面的设备都无法工作

* 计数器定时查询

  设备通过BR线发出请求，总线仲裁器接受到请求后，在BS线为0的情况下计数，计数值通过地址线发往各设备。每个设备都有设备地址判别电路，当地址线计数值与设备地址一致时，该设备获得总线使用权，BS置1，终止计数

  该种方式优点是可以通过决定是否从上次终止点开始继续计数还是从0计数来改变各个设备的优先级；其缺点是要增加线的数量

* 独立请求

  每个设备都有一对独立的总线请求线和授权线，请求的信号在排队电路中被总线仲裁器以优先级次序处理授权

  该种方式优点是响应快，优先级次序控制灵活；其缺点是线数大量增加

**现代计算机基本采用独立请求方式**

### 分布式仲裁

不需要集中的总线仲裁器，每个设备都有自己的总线仲裁器。请求总线时，将它们唯一的仲裁号发送到共享的仲裁总线上，每个仲裁器将从仲裁总线上得到的号与自己比较。若仲裁总线上的号大，则不予响应并撤销其仲裁号，最后获胜者的仲裁号保留在仲裁总线上获得授权